var app=angular.module("sandboxapp.about",["ngAnimate"]);app.controller("AboutCtrl",["$scope","$state",function(e,a){"use strict";e.close=function(){a.go("bar-start")}}]);var app=angular.module("sandboxapp.home",["ngAnimate"]);app.controller("BarCtrl",["$scope","$timeout",function(e,a){"use strict";e.config={reelChoicesCount:3,reelCount:3,reelRadius:100,durationMin:.5,durationMax:4},e.REWARDS={INIT:-2,NONE:-1,TEE:0,COFFEE:1,ESPRESSO:2},e.reelChoices=[];var o=[["teapot","coffee-maker","espresso-machine"],["tea-strainer","coffee-filter","espresso-tamper"],["loose-tea","coffee-grounds","espresso-beans"]];e.reward=["tea","coffee","espresso"],e.ringTransform=["none","none","none"],e.ringTransformDuration=[0,0,0],e.start=!0,e.isReward=e.REWARDS.INIT;var r=[0,0,0],n=function(e,a){return Math.floor(Math.random()*(a-e+1))+e},t=function(a){var r=360/e.config.reelChoicesCount;e.reelChoices[a]=[];for(var n=0;n<e.config.reelChoicesCount;n++)e.reelChoices[a][n]={content:o[a][n]},e.reelChoices[a][n].transform="rotateX("+r*n+"deg) translateZ("+e.config.reelRadius+"px)"};e.spin=function(o){e.start=o?!0:!1,e.isSpinning=!0,e.isReward=e.REWARDS.INIT;var r=[],n=s(o,r);return o||!n?(e.isSpinning=!1,void 0):(a(function(){e.isReward=e.REWARDS.NONE,r[0]===r[1]&&r[0]===r[2]&&(e.isReward=r[0]),e.isSpinning=!1},1e3*n),void 0)};for(var s=function(a,o){for(var t=0,s=0;s<e.config.reelCount;s++){o[s]=n(0,e.config.reelChoicesCount-1),a&&s===e.config.reelCount-1&&o[0]===o[1]&&o[0]===o[2]&&(o[s]=(o[s]+1)%e.config.reelChoicesCount);var i=360-120*o[s];r[s]=a?0:r[s]+1080,i+=r[s],console.log("CardNumber, Angle",o[s],i,r[s]),e.ringTransform[s]="rotateX("+i+"deg)";var l=Math.random()*(e.config.durationMax-e.config.durationMin)+e.config.durationMin;e.ringTransformDuration[s]=(a?0:l)+"s",t=l>t?l:t}return t},i=0;i<e.config.reelCount;i++)t(i);e.spin(!0)}]),function(e){try{e=angular.module("sandboxapp-templates")}catch(a){e=angular.module("sandboxapp-templates",[])}e.run(["$templateCache",function(e){e.put("/sandboxapp/about/about.html",'<div class="content animate-view"><h1 class="title">Espresso Bar Slot Machine</h1><div class="subtitle">Programming Challenge</div><div class="about-text"><p>At company XYZ, engineers and designers enjoy a healthy dose of caffeine in the morning. They like to drink coffee, tea, or espresso. Your goal is to build a slot machine to award lucky users one of these random beverages. Your solution should be in JavaScript and CSS. You may use standard libraries like jQuery, Underscore, Backbone, and/or Angular.</p>Your slot machine should have three reels:<li>The first reel has a coffee maker, a teapot, and an espresso machine.</li><li>The second reel has a coffee filter, a tea strainer, and an espresso tamper.</li><li>The third reel has coffee grounds, loose tea, and ground espresso beans.</li><p>When the lever is pulled (you can simulate this with the click of a button), the slot machine goes into action. Each reel spins and randomly stops on one of the three options. If the user is lucky, the three reels will line up and she will be rewarded with a tasty hot beverage. Your solution should show the user what beverage she\'s won. For example, if the reels show coffee maker, coffee filter, and coffee grounds, the user wins a cup of coffee.</p></div><div class="lever"><button type="submit" ng-click="close()">CLOSE</button></div></div>')}])}(),function(e){try{e=angular.module("sandboxapp-templates")}catch(a){e=angular.module("sandboxapp-templates",[])}e.run(["$templateCache",function(e){e.put("/sandboxapp/bar/bar.html",'<div class="content content-bar animate-view"><div class="about" ui-sref="bar-about()">?</div><h1 class="title">Espresso Bar Slot Machine</h1><div class="machine"><div class="reel-wrapper" ng-repeat="reel in [0,1,2]"><div class="reel" ng-style="{\'transform\': ringTransform[reel], \'transition-duration\': ringTransformDuration[reel]}"><div ng-repeat="choice in reelChoices[reel]" class="card" ng-style="{ \'transform\' : choice.transform }"><p ng-class="{\'{{choice.content}}\' : choice.content}"></p></div></div></div></div><div><div class="animate-show" ng-show="isReward !== REWARDS.INIT && isReward !== REWARDS.NONE">You won! Enjoy your {{reward[isReward]}}</div><div class="animate-show" ng-show="isReward === REWARDS.NONE">Try again!</div><div class="animate-show" ng-show="start">Press GO to start</div></div><div class="lever"><button type="submit" ng-disabled="isSpinning" ng-click="spin()">GO</button></div></div>')}])}(),angular.module("sandboxapp",["sandboxapp-templates","sandboxapp.home","sandboxapp.about","ui.router","ngAnimate"]).config(["$stateProvider","$urlRouterProvider",function(e,a){"use strict";a.otherwise("/espresso-bar"),e.state("bar-start",{url:"/espresso-bar",templateUrl:"/sandboxapp/bar/bar.html",controller:"BarCtrl"}).state("bar-about",{url:"/about",templateUrl:"/sandboxapp/about/about.html",controller:"AboutCtrl"})}]);